{"version":3,"file":"universal-router-generate-urls.js","sources":["../src/generateUrls.js"],"sourcesContent":["/**\n * Universal Router (https://www.kriasoft.com/universal-router/)\n *\n * Copyright Â© 2015-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the Apache 2.0 license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nconst cache = new Map();\n\nfunction generateUrls(router) {\n  const pathToRegexp = router.constructor.pathToRegexp;\n  let routesByName = {};\n\n  function update(route, routes) {\n    if (routesByName[route.name]) {\n      throw new Error(`Route \"${route.name}\" already exists`);\n    }\n\n    routesByName[route.name] = route;\n\n    if (routes) {\n      for (let i = 0; i < routes.length; i += 1) {\n        const childRoute = routes[i];\n        childRoute.parent = route;\n        update(childRoute, childRoute.children);\n      }\n    }\n  }\n\n  return (routeName, params) => {\n    let route = routesByName[routeName];\n    if (!route) {\n      routesByName = {};\n      update(router.root, router.root.children);\n      route = routesByName[routeName];\n\n      if (!route) {\n        throw new Error(`Route \"${routeName}\" not found`);\n      }\n    }\n\n    let path = '';\n    while (route) {\n      if (route.path !== '/') {\n        let toPath = cache.get(route.path);\n        if (!toPath) {\n          toPath = pathToRegexp.compile(route.path);\n          cache.set(route.path, toPath);\n        }\n        path = toPath(params) + path;\n      }\n      route = route.parent;\n    }\n\n    return router.baseUrl + path || '/';\n  };\n}\n\nexport default generateUrls;\n"],"names":["cache","Map","generateUrls","router","pathToRegexp","constructor","routesByName","update","route","routes","name","Error","i","length","childRoute","parent","children","routeName","params","root","path","toPath","get","compile","set","baseUrl"],"mappings":";;;;;;;;AAAA;;;;;;;;;AASA,IAAMA,QAAQ,IAAIC,GAAJ,EAAd;;AAEA,SAASC,YAAT,CAAsBC,MAAtB,EAA8B;MACtBC,eAAeD,OAAOE,WAAP,CAAmBD,YAAxC;MACIE,eAAe,EAAnB;;WAESC,MAAT,CAAgBC,KAAhB,EAAuBC,MAAvB,EAA+B;QACzBH,aAAaE,MAAME,IAAnB,CAAJ,EAA8B;YACtB,IAAIC,KAAJ,aAAoBH,MAAME,IAA1B,sBAAN;;;iBAGWF,MAAME,IAAnB,IAA2BF,KAA3B;;QAEIC,MAAJ,EAAY;WACL,IAAIG,IAAI,CAAb,EAAgBA,IAAIH,OAAOI,MAA3B,EAAmCD,KAAK,CAAxC,EAA2C;YACnCE,aAAaL,OAAOG,CAAP,CAAnB;mBACWG,MAAX,GAAoBP,KAApB;eACOM,UAAP,EAAmBA,WAAWE,QAA9B;;;;;SAKC,UAACC,SAAD,EAAYC,MAAZ,EAAuB;QACxBV,QAAQF,aAAaW,SAAb,CAAZ;QACI,CAACT,KAAL,EAAY;qBACK,EAAf;aACOL,OAAOgB,IAAd,EAAoBhB,OAAOgB,IAAP,CAAYH,QAAhC;cACQV,aAAaW,SAAb,CAAR;;UAEI,CAACT,KAAL,EAAY;cACJ,IAAIG,KAAJ,aAAoBM,SAApB,iBAAN;;;;QAIAG,OAAO,EAAX;WACOZ,KAAP,EAAc;UACRA,MAAMY,IAAN,KAAe,GAAnB,EAAwB;YAClBC,SAASrB,MAAMsB,GAAN,CAAUd,MAAMY,IAAhB,CAAb;YACI,CAACC,MAAL,EAAa;mBACFjB,aAAamB,OAAb,CAAqBf,MAAMY,IAA3B,CAAT;gBACMI,GAAN,CAAUhB,MAAMY,IAAhB,EAAsBC,MAAtB;;eAEKA,OAAOH,MAAP,IAAiBE,IAAxB;;cAEMZ,MAAMO,MAAd;;;WAGKZ,OAAOsB,OAAP,GAAiBL,IAAjB,IAAyB,GAAhC;GAzBF;CA6BF;;;;"}