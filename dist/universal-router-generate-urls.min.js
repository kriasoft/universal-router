/*! Universal Router | MIT License | https://www.kriasoft.com/universal-router/ */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).generateUrls=r()}(this,function(){"use strict";function A(e,r){void 0===r&&(r={});for(var i=function(e){for(var r=[],t=0;t<e.length;){var n=e[t];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)r.push({type:"CHAR",index:t,value:e[t++]});else{var a=1,i="";if("?"===e[f=t+1])throw new TypeError('Pattern cannot start with "?" at '+f);for(;f<e.length;)if("\\"!==e[f]){if(")"===e[f]){if(0===--a){f++;break}}else if("("===e[f]&&(a++,"?"!==e[f+1]))throw new TypeError("Capturing groups are not allowed at "+f);i+=e[f++]}else i+=e[f++]+e[f++];if(a)throw new TypeError("Unbalanced pattern at "+t);if(!i)throw new TypeError("Missing pattern at "+t);r.push({type:"PATTERN",index:t,value:i}),t=f}else{for(var o="",f=t+1;f<e.length;){var p=e.charCodeAt(f);if(!(48<=p&&p<=57||65<=p&&p<=90||97<=p&&p<=122||95===p))break;o+=e[f++]}if(!o)throw new TypeError("Missing parameter name at "+t);r.push({type:"NAME",index:t,value:o}),t=f}else r.push({type:"CLOSE",index:t,value:e[t++]});else r.push({type:"OPEN",index:t,value:e[t++]});else r.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});else r.push({type:"MODIFIER",index:t,value:e[t++]})}return r.push({type:"END",index:t,value:""}),r}(e),t=r.prefixes,n=void 0===t?"./":t,a="[^"+(r.delimiter||"/#?").replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")+"]+?",o=[],f=0,p=0,s="",u=function(e){if(p<i.length&&i[p].type===e)return i[p++].value},l=function(e){var r=u(e);if(void 0!==r)return r;var t=i[p],n=t.type,a=t.index;throw new TypeError("Unexpected "+n+" at "+a+", expected "+e)},d=function(){for(var e,r="";e=u("CHAR")||u("ESCAPED_CHAR");)r+=e;return r};p<i.length;){var h=u("CHAR"),v=u("NAME"),c=u("PATTERN");if(v||c){var y=h||"";-1===n.indexOf(y)&&(s+=y,y=""),s&&(o.push(s),s=""),o.push({name:v||f++,prefix:y,suffix:"",pattern:c||a,modifier:u("MODIFIER")||""})}else{var E=h||u("ESCAPED_CHAR");if(E)s+=E;else if(s&&(o.push(s),s=""),u("OPEN")){y=d();var m=u("NAME")||"",w=u("PATTERN")||"",g=d();l("CLOSE"),o.push({name:m||(w?f++:""),pattern:m&&!w?a:w,prefix:y,suffix:g,modifier:u("MODIFIER")||""})}else l("END")}}return o}return function(m,e){if(!m)throw new ReferenceError("Router is not defined");var w=new Map,g=new Map,x=Object.assign({encode:encodeURIComponent},e);return function(e,r){var t=w.get(e);if(!(t||(w.clear(),g.clear(),function e(r,t,n){if(t.name&&r.has(t.name))throw new Error('Route "'+t.name+'" already exists');if(t.name&&r.set(t.name,t),n)for(var a=0;a<n.length;a++){var i=n[a];i.parent=t,e(r,i,i.children)}}(w,m.root,m.root.children),t=w.get(e))))throw new Error('Route "'+e+'" not found');var n=g.get(t);if(!n){for(var a="",i=t;i;){var o=Array.isArray(i.path)?i.path[0]:i.path;o&&(a=o+a),i=i.parent}for(var f=A(a,x),p=function(u,e){void 0===e&&(e={});var r,t=(r=e)&&r.sensitive?"":"i",n=e.encode,l=void 0===n?function(e){return e}:n,a=e.validate,d=void 0===a||a,h=u.map(function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",t)});return function(e){for(var r="",t=0;t<u.length;t++){var n=u[t];if("string"!=typeof n){var a=e?e[n.name]:void 0,i="?"===n.modifier||"*"===n.modifier,o="*"===n.modifier||"+"===n.modifier;if(Array.isArray(a)){if(!o)throw new TypeError('Expected "'+n.name+'" to not repeat, but got an array');if(0===a.length){if(i)continue;throw new TypeError('Expected "'+n.name+'" to not be empty')}for(var f=0;f<a.length;f++){var p=l(a[f],n);if(d&&!h[t].test(p))throw new TypeError('Expected all "'+n.name+'" to match "'+n.pattern+'", but got "'+p+'"');r+=n.prefix+p+n.suffix}}else if("string"!=typeof a&&"number"!=typeof a){if(!i){var s=o?"an array":"a string";throw new TypeError('Expected "'+n.name+'" to be '+s)}}else{p=l(String(a),n);if(d&&!h[t].test(p))throw new TypeError('Expected "'+n.name+'" to match "'+n.pattern+'", but got "'+p+'"');r+=n.prefix+p+n.suffix}}else r+=n}return r}}(f,x),s=Object.create(null),u=0;u<f.length;u++){var l=f[u];"string"!=typeof l&&(s[l.name]=!0)}n={toPath:p,keys:s},g.set(t,n)}var d=m.baseUrl+n.toPath(r)||"/";if(x.stringifyQueryParams&&r){for(var h={},v=Object.keys(r),c=0;c<v.length;c++){var y=v[c];n.keys[y]||(h[y]=r[y])}var E=x.stringifyQueryParams(h);E&&(d+="?"===E.charAt(0)?E:"?"+E)}return d}}});
//# sourceMappingURL=universal-router-generate-urls.min.js.map
